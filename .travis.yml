sudo: required
dist: trusty

services:
- docker

language: java
jdk:
- oraclejdk8

before_install:
- if [ $TRAVIS_SECURE_ENV_VARS == true ]; then
    openssl aes-256-cbc -K $encrypted_7e6e282fecc8_key -iv $encrypted_7e6e282fecc8_iv -in travis/resources/servicekey.json.enc -out servicekey.json -d;
  fi

script:
- travis/test.sh
#If travis/test.sh hasn't completed wait for 45min
- if [ $test_complete == false ]; then
     sleep 2700;
     echo "slept for 45 min";
     echo "test is complete?" $test_complete;
     echo "tail output.txt";
     tail -n 100 output.txt;
  fi
- if [ $test_complete == false ]; then
     sleep 2700;
     echo "slept for 90 min";
     echo "test is complete?" $test_complete;
     echo "tail output.txt";
     tail -n 100 output.txt;
  fi
- if [ $test_complete == false ]; then
     sleep 2700;
     echo "slept for 135 min";
     echo "test is complete?" $test_complete;
     echo "tail output.txt";
     tail -n 100 output.txt;
  fi
- if [ $test_complete == false ]; then
     sleep 2700;
     echo "slept for 180 min";
     echo "test is complete?" $test_complete;
     echo "tail output.txt";
     tail -n 100 output.txt;
  fi
#- cat cromwell-workflow-logs/workflow*